<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Agenda de Reservas</title>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

<style>
/* ===== BASE ===== */
body {
  margin: 0;
  font-family: 'Segoe UI', sans-serif;
  background: #faf7f4;
  color: #1f4f5f;
}

.container {
  max-width: 1000px;
  margin: 0 auto;
  padding: 60px 20px;
}

.cabana {
  background: #ffffff;
  border-radius: 12px;
  padding: 40px;
  margin-bottom: 60px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.05);
}

h2 {
  margin-top: 0;
}

.sub {
  margin-bottom: 20px;
  font-size: 14px;
  color: #666;
}

input {
  width: 100%;
  padding: 14px;
  font-size: 16px;
  border-radius: 8px;
  border: 1px solid #ccc;
}

.total {
  margin-top: 16px;
  font-size: 20px;
  font-weight: 600;
}

.aviso {
  margin-top: 6px;
  font-size: 13px;
  color: #e88a7a;
}

button {
  margin-top: 24px;
  padding: 14px;
  width: 100%;
  font-size: 16px;
  border-radius: 8px;
  background: #1f4f5f;
  color: #fff;
  border: none;
  cursor: pointer;
}

button:hover {
  background: #163b47;
}

/* ===== DATAS BLOQUEADAS ===== */
.flatpickr-day.flatpickr-disabled {
  background: #f0f0f0 !important;
  color: #999 !important;
  position: relative;
}

.flatpickr-day.flatpickr-disabled::before {
  content: "✕";
  color: #c40000;
  font-size: 18px;
  font-weight: bold;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

.flatpickr-day.prevMonthDay,
.flatpickr-day.nextMonthDay {
  visibility: hidden;
}

/* ================= MOBILE APP-LIKE ================= */
@media (max-width: 768px) {

  .container {
    padding: 24px 16px;
  }

  .cabana {
    padding: 24px 18px;
    margin-bottom: 80px;
  }

  .total {
    background: #f3f3f3;
    padding: 14px;
    border-radius: 10px;
    text-align: center;
  }

  .aviso {
    text-align: center;
  }

  /* Botão WhatsApp fixo */
  .cabana button {
    position: fixed;
    bottom: 16px;
    left: 16px;
    right: 16px;
    z-index: 5000;
    box-shadow: 0 8px 20px rgba(0,0,0,0.25);
  }

  /* Overlay do calendário */
  .flatpickr-calendar {
    position: fixed !important;
    inset: 0 !important;
    margin: auto !important;
    width: 100vw !important;
    height: 100vh !important;
    max-height: none !important;
    border-radius: 0 !important;
    z-index: 9999 !important;
    display: flex;
    flex-direction: column;
    background: #fff;
  }

  /* Header do calendário */
  .flatpickr-calendar::before {
    content: "✕ Fechar";
    padding: 16px;
    font-size: 18px;
    text-align: right;
    border-bottom: 1px solid #ddd;
    cursor: pointer;
  }

  .flatpickr-innerContainer {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
  }
}
</style>
</head>

<body>
<div class="container">

<div class="cabana">
  <h2>Cabana Doce Encanto</h2>
  <div class="sub">Check-in às 16h • Check-out às 13h</div>
  <input id="datas1" placeholder="Selecione as datas">
  <div id="total1" class="total">Total: R$ 0</div>
  <div class="aviso">Fins de semana exigem mínimo de 2 diárias.</div>
  <button onclick="reservar('Cabana Doce Encanto', total1, checkin1, checkout1)">
    Reservar no WhatsApp
  </button>
</div>

<div class="cabana">
  <h2>Cabana Vale das Flores</h2>
  <div class="sub">Check-in às 16h • Check-out às 13h</div>
  <input id="datas2" placeholder="Selecione as datas">
  <div id="total2" class="total">Total: R$ 0</div>
  <div class="aviso">Fins de semana exigem mínimo de 2 diárias.</div>
  <button onclick="reservar('Cabana Vale das Flores', total2, checkin2, checkout2)">
    Reservar no WhatsApp
  </button>
</div>

</div>

<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

<script>
const whatsapp = "554999458410";

const inicio = new Date(2026,0,1);
const fim = new Date(2026,2,31);

const doceSemana = 700;
const doceFds = 900;
const valeSemana = 800;
const valeFds = 950;

function d(y,m,day){ return new Date(y,m-1,day); }

const bloqueadasDoce = [
  d(2026,1,1),d(2026,1,2),d(2026,1,3),d(2026,1,4),d(2026,1,5),
  d(2026,1,6),d(2026,1,7),d(2026,1,8),d(2026,1,9),d(2026,1,10),
  d(2026,1,11),d(2026,1,12),d(2026,1,13),d(2026,1,14),
  d(2026,1,16),d(2026,1,17),d(2026,1,18),d(2026,1,19),
  d(2026,1,20),d(2026,1,21),d(2026,1,22),d(2026,1,23),
  d(2026,1,24),d(2026,1,25),d(2026,1,26),d(2026,1,27),
  d(2026,1,28),d(2026,1,29),d(2026,1,30),
  d(2026,2,7),d(2026,2,8),d(2026,2,11),d(2026,2,12),
  d(2026,2,13),d(2026,2,14),d(2026,2,15),
  d(2026,2,16),d(2026,2,17),d(2026,2,20),d(2026,2,21),
  d(2026,3,13),d(2026,3,14)
];

const bloqueadasVale = [
  d(2026,1,1),d(2026,1,2),d(2026,1,3),d(2026,1,4),d(2026,1,5),
  d(2026,1,6),d(2026,1,7),d(2026,1,8),d(2026,1,9),d(2026,1,10),
  d(2026,1,11),d(2026,1,12),d(2026,1,13),d(2026,1,14),
  d(2026,1,15),d(2026,1,16),d(2026,1,17),
  d(2026,1,19),d(2026,1,20),d(2026,1,21),d(2026,1,22),
  d(2026,1,23),d(2026,1,24),d(2026,1,29),
  d(2026,2,1),d(2026,2,2),d(2026,2,22),d(2026,2,23),
  d(2026,3,2)
];

function isFds(date){ return date.getDay()===5||date.getDay()===6; }

function calculaTotal(ci,co,ps,pf){
  let t=0,d=new Date(ci),dias=0;
  while(d<co){ t+=isFds(d)?pf:ps; dias++; d.setDate(d.getDate()+1); }
  return {t,dias};
}

let checkin1,checkout1,total1=0;
let checkin2,checkout2,total2=0;

flatpickr("#datas1",{mode:"range",minDate:inicio,maxDate:fim,disable:bloqueadasDoce,
onChange:d=>{
 if(d.length===2){
  const r=calculaTotal(d[0],d[1],doceSemana,doceFds);
  if(isFds(d[0])&&r.dias<2){ alert("Mínimo 2 diárias no fim de semana"); return;}
  checkin1=d[0]; checkout1=d[1]; total1=r.t;
  total1Elem.innerText=`Total: R$ ${total1}`;
 }
}});

flatpickr("#datas2",{mode:"range",minDate:inicio,maxDate:fim,disable:bloqueadasVale,
onChange:d=>{
 if(d.length===2){
  const r=calculaTotal(d[0],d[1],valeSemana,valeFds);
  if(isFds(d[0])&&r.dias<2){ alert("Mínimo 2 diárias no fim de semana"); return;}
  checkin2=d[0]; checkout2=d[1]; total2=r.t;
  total2Elem.innerText=`Total: R$ ${total2}`;
 }
}});

const total1Elem=document.getElementById("total1");
const total2Elem=document.getElementById("total2");

function reservar(nome,total,ci,co){
 if(!ci||!co){alert("Selecione as datas");return;}
 const msg=`Olá! Quero reservar a ${nome}
Check-in: ${ci.toLocaleDateString()}
Check-out: ${co.toLocaleDateString()}
Total: R$ ${total}`;
 window.open(`https://wa.me/${whatsapp}?text=${encodeURIComponent(msg)}`,"_blank");
}
</script>
</body>
</html>
