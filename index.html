<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Agenda de Reservas</title>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

<style>
body {
  margin: 0;
  font-family: 'Segoe UI', sans-serif;
  background: #faf7f4;
  color: #1f4f5f;
}

.container {
  max-width: 1000px;
  margin: 0 auto;
  padding: 60px 20px;
}

.cabana {
  background: #ffffff;
  border-radius: 12px;
  padding: 40px;
  margin-bottom: 60px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.05);
}

.cabana-header {
  display: flex;
  align-items: baseline;
  gap: 20px;
  margin-bottom: 30px;
}

.cabana-header .agenda {
  font-size: 32px;
  font-weight: 600;
  letter-spacing: 2px;
}

.cabana-header .nome {
  font-size: 36px;
  font-family: 'Georgia', serif;
  font-weight: 400;
}

.sub {
  margin-bottom: 20px;
  font-size: 14px;
  color: #666;
}

input {
  width: 100%;
  padding: 14px;
  font-size: 16px;
  border-radius: 8px;
  border: 1px solid #ccc;
}

.total {
  margin-top: 16px;
  font-size: 20px;
  font-weight: 600;
}

.aviso {
  margin-top: 6px;
  font-size: 13px;
  color: #e88a7a;
}

button {
  margin-top: 24px;
  padding: 14px;
  width: 100%;
  font-size: 16px;
  border-radius: 8px;
  background: #1f4f5f;
  color: #fff;
  border: none;
  cursor: pointer;
  transition: all .2s ease;
}

button:hover {
  background: #163b47;
}

/* ===== DATAS BLOQUEADAS COM X ===== */
.flatpickr-day.flatpickr-disabled {
  background: #f0f0f0 !important;
  color: #999 !important;
  position: relative;
}

.flatpickr-day.flatpickr-disabled::before {
  content: "✕";
  color: #c40000;
  font-size: 18px;
  font-weight: bold;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

.flatpickr-day.prevMonthDay,
.flatpickr-day.nextMonthDay {
  visibility: hidden;
}

@media (max-width: 768px) {

  body {
    background: #faf7f4;
  }

  .container {
    padding: 30px 16px;
  }

  .cabana {
    padding: 24px 18px;
    margin-bottom: 40px;
  }

  h2 {
    font-size: 22px;
  }

  .cabana-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 6px;
  }

  .cabana-header .agenda {
    font-size: 22px;
    letter-spacing: 1px;
  }

  .cabana-header .nome {
    font-size: 26px;
  }

  .sub {
    font-size: 13px;
  }

  input {
    font-size: 16px;
    padding: 14px;
  }

  .total {
    font-size: 18px;
  }

  button {
    font-size: 17px;
    padding: 16px;
    border-radius: 10px;
  }

  /* Calendário ocupa a tela melhor no mobile */
  .flatpickr-calendar {
    font-size: 14px;
  }
}
</style>


</head>

<body>

<div class="cabana">
  <h2>Cabana Doce Encanto</h2>
  <div class="sub">Check-in às 16h • Check-out às 13h</div>

  <input id="datas1" placeholder="Selecione as datas">
  <div id="total1" class="total">Total: R$ 0</div>
  <div class="aviso">Fins de semana exigem mínimo de 2 diárias.</div>

  <button onclick="reservar('Cabana Doce Encanto', total1, checkin1, checkout1)">
    Reservar no WhatsApp
  </button>
</div>

<div class="cabana">
  <h2>Cabana Vale das Flores</h2>
  <div class="sub">Check-in às 16h • Check-out às 13h</div>

  <input id="datas2" placeholder="Selecione as datas">
  <div id="total2" class="total">Total: R$ 0</div>
  <div class="aviso">Fins de semana exigem mínimo de 2 diárias.</div>

  <button onclick="reservar('Cabana Vale das Flores', total2, checkin2, checkout2)">
    Reservar no WhatsApp
  </button>
</div>

<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

<script>
const whatsapp = "554999458410";

/* ===== CONFIGURAÇÃO DE MESES ===== */
const inicio = new Date(2026, 0, 1); // Janeiro 2026
const fim = new Date(2026, 2, 31);   // Março 2026

/* ===== PREÇOS ===== */
const doceSemana = 700;
const doceFds = 900;

const valeSemana = 800;
const valeFds = 950;

function d(y, m, day) {
  return new Date(y, m - 1, day);
}

/* ===== DATAS BLOQUEADAS (VOU PREENCHER PRA VOCÊ) ===== */
const bloqueadasDoce = [
  d(2026,1,1), d(2026,1,2), d(2026,1,3), d(2026,1,4), d(2026,1,5),
  d(2026,1,6), d(2026,1,7), d(2026,1,8), d(2026,1,9), d(2026,1,10),
  d(2026,1,11), d(2026,1,12), d(2026,1,13), d(2026,1,14),
  d(2026,1,16), d(2026,1,17), d(2026,1,18), d(2026,1,19),
  d(2026,1,20), d(2026,1,21), d(2026,1,22), d(2026,1,23),
  d(2026,1,24), d(2026,1,25), d(2026,1,26), d(2026,1,27),
  d(2026,1,28), d(2026,1,29), d(2026,1,30),

 d(2026,2,7), d(2026,2,8),
d(2026,2,11), d(2026,2,12), d(2026,2,13), d(2026,2,14),
d(2026,2,15), d(2026,2,16), d(2026,2,17),
d(2026,2,20), d(2026,2,21),

d(2026,3,13), d(2026,3,14),
];

const bloqueadasVale = [
  d(2026,1,1), d(2026,1,2), d(2026,1,3), d(2026,1,4), d(2026,1,5),
  d(2026,1,6), d(2026,1,7), d(2026,1,8), d(2026,1,9), d(2026,1,10),
  d(2026,1,11), d(2026,1,12), d(2026,1,13), d(2026,1,14),
  d(2026,1,15), d(2026,1,16), d(2026,1,17),
  d(2026,1,19), d(2026,1,20), d(2026,1,21), d(2026,1,22),
  d(2026,1,23), d(2026,1,24),
  d(2026,1,29),

d(2026,2,1), d(2026,2,2),
d(2026,2,22), d(2026,2,23),

d(2026,3,2),
];


/* ===== VARIÁVEIS ===== */
let checkin1, checkout1, total1 = 0;
let checkin2, checkout2, total2 = 0;

/* ===== FUNÇÕES ===== */
function isFds(date) {
  const d = date.getDay();
  return d === 5 || d === 6;
}

function calculaTotal(checkin, checkout, precoSemana, precoFds) {
  let total = 0;
  let dias = 0;
  let d = new Date(checkin);

  while (d < checkout) {
    total += isFds(d) ? precoFds : precoSemana;
    dias++;
    d.setDate(d.getDate() + 1);
  }

  return { total, dias };
}

function validaFimDeSemana(checkin, dias) {
  if (isFds(checkin) && dias < 2) {
    alert("Sexta e sábado exigem mínimo de 2 diárias.");
    return false;
  }
  return true;
}

/* ===== CABANA DOCE ENCANTO ===== */
flatpickr("#datas1", {
  mode: "range",
  dateFormat: "d/m/Y",
  minDate: inicio,
  maxDate: fim,
  disable: bloqueadasDoce,
  onChange: d => {
    if (d.length === 2) {
      const r = calculaTotal(d[0], d[1], doceSemana, doceFds);

      if (!validaFimDeSemana(d[0], r.dias)) {
        document.getElementById("datas1")._flatpickr.clear();
        document.getElementById("total1").innerText = "Total: R$ 0";
        return;
      }

      checkin1 = d[0];
      checkout1 = d[1];
      total1 = r.total;
      document.getElementById("total1").innerText = `Total: R$ ${total1}`;
    }
  }
});

/* ===== CABANA VALE DAS FLORES ===== */
flatpickr("#datas2", {
  mode: "range",
  dateFormat: "d/m/Y",
  minDate: inicio,
  maxDate: fim,
  disable: bloqueadasVale,
  onChange: d => {
    if (d.length === 2) {
      const r = calculaTotal(d[0], d[1], valeSemana, valeFds);

      if (!validaFimDeSemana(d[0], r.dias)) {
        document.getElementById("datas2")._flatpickr.clear();
        document.getElementById("total2").innerText = "Total: R$ 0";
        return;
      }

      checkin2 = d[0];
      checkout2 = d[1];
      total2 = r.total;
      document.getElementById("total2").innerText = `Total: R$ ${total2}`;
    }
  }
});

/* ===== WHATSAPP ===== */
function reservar(nome, total, checkin, checkout) {
  if (!checkin || !checkout) {
    alert("Selecione as datas corretamente.");
    return;
  }

  const msg = `Olá! Quero reservar a ${nome}

Check-in: ${checkin.toLocaleDateString()}
Check-out: ${checkout.toLocaleDateString()}
Total: R$ ${total}`;

  window.open(
    `https://wa.me/${whatsapp}?text=${encodeURIComponent(msg)}`,
    "_blank"
  );
}
</script>


</body>
</html>

