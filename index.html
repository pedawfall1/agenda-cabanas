<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Agenda de Reservas</title>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

<style>
body {
  margin: 0;
  font-family: 'Segoe UI', sans-serif;
  background: #faf7f4;
  color: #1f4f5f;
}

.container {
  max-width: 1000px;
  margin: 0 auto;
  padding: 40px 16px;
}

.cabana {
  background: #ffffff;
  border-radius: 14px;
  padding: 24px;
  margin-bottom: 40px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.06);
}

h2 { margin: 0 0 6px 0; }

.sub {
  font-size: 14px;
  color: #666;
  margin-bottom: 16px;
}

input {
  width: 100%;
  padding: 14px 16px;
  height: 52px;
  font-size: 16px;
  line-height: 1;
  box-sizing: border-box;
  border-radius: 10px;
  border: 1px solid #ccc;

  /* üî• ESSENCIAIS PRA N√ÉO VAZAR */
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.total {
  margin-top: 14px;
  background: #f3f3f3;
  padding: 14px;
  border-radius: 10px;
  font-size: 18px;
  font-weight: 600;
  text-align: center;
}

.aviso {
  margin-top: 8px;
  font-size: 13px;
  color: #e88a7a;
  text-align: center;
}

button {
  margin-top: 18px;
  padding: 14px;
  width: 100%;
  font-size: 16px;
  border-radius: 10px;
  background: #1f4f5f;
  color: #fff;
  border: none;
  cursor: pointer;
}

button:hover { background: #163b47; }

/* ‚ùå DATAS BLOQUEADAS */
.flatpickr-day.flatpickr-disabled {
  background: #f0f0f0 !important;
  color: #999 !important;
  position: relative;
}

.flatpickr-day.flatpickr-disabled::before {
  content: "‚úï";
  color: #c40000;
  font-size: 18px;
  font-weight: bold;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  pointer-events: none;
}

.flatpickr-day.prevMonthDay,
.flatpickr-day.nextMonthDay {
  visibility: hidden;
}

/* MOBILE FULLSCREEN */
@media (max-width: 768px) {
  .flatpickr-calendar {
    position: fixed !important;
    inset: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    border-radius: 0 !important;
    z-index: 9999 !important;
    background: #fff;
    display: flex;
    flex-direction: column;
  }

  .flatpickr-innerContainer {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .flatpickr-days { max-width: 360px; }

  .flatpickr-day {
    min-width: 42px;
    height: 42px;
    line-height: 42px;
  }

  .fp-close-btn {
    padding: 16px;
    text-align: center;
    font-size: 18px;
    border-top: 1px solid #eee;
    cursor: pointer;
  }
}
</style>
</head>

<body>
<div class="container">

<div class="cabana">
  <h2>Cabana Doce Encanto</h2>
  <div class="sub">Check-in √†s 16h ‚Ä¢ Check-out √†s 13h</div>
  <input id="datas1" placeholder="Selecione as datas">
  <div id="total1" class="total">Total: R$ 0</div>
  <div class="aviso">Fins de semana exigem m√≠nimo de 2 di√°rias.</div>
  <button onclick="reservar('Cabana Doce Encanto', total1, checkin1, checkout1)">
    Reservar no WhatsApp
  </button>
</div>

<div class="cabana">
  <h2>Cabana Vale das Flores</h2>
  <div class="sub">Check-in √†s 16h ‚Ä¢ Check-out √†s 13h</div>
  <input id="datas2" placeholder="Selecione as datas">
  <div id="total2" class="total">Total: R$ 0</div>
  <div class="aviso">Fins de semana exigem m√≠nimo de 2 di√°rias.</div>
  <button onclick="reservar('Cabana Vale das Flores', total2, checkin2, checkout2)">
    Reservar no WhatsApp
  </button>
</div>

</div>

<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/pt.js"></script>

<script>
const whatsapp = "554999458410";
const inicio = new Date(2026,0,1);
const fim = new Date(2026,2,31);

function isFds(d){ return d.getDay()===5 || d.getDay()===6; }

function calculaTotal(ci,co,ps,pf){
  let t=0,d=new Date(ci),dias=0;
  while(d<co){ t+=isFds(d)?pf:ps; dias++; d.setDate(d.getDate()+1); }
  return {t,dias};
}

/* üîí DATAS LOCADAS (BLOQUEADAS) */

/* Doce Encanto */
const bloqueadasDoce = [
  new Date(2026,0,1), new Date(2026,0,2), new Date(2026,0,3),
  new Date(2026,0,4), new Date(2026,0,5), new Date(2026,0,6),
  new Date(2026,0,7), new Date(2026,0,8), new Date(2026,0,9),
  new Date(2026,0,10), new Date(2026,0,11), new Date(2026,0,12),
  new Date(2026,0,13), new Date(2026,0,14),
  new Date(2026,0,16), new Date(2026,0,17), new Date(2026,0,18),
  new Date(2026,0,19), new Date(2026,0,20), new Date(2026,0,21),
  new Date(2026,0,22), new Date(2026,0,23), new Date(2026,0,24),
  new Date(2026,0,25), new Date(2026,0,26), new Date(2026,0,27),
  new Date(2026,0,28), new Date(2026,0,29), new Date(2026,0,30),

  // Fevereiro
  new Date(2026,1,7), new Date(2026,1,8),
  new Date(2026,1,11), new Date(2026,1,12), new Date(2026,1,13),
  new Date(2026,1,14), new Date(2026,1,15), new Date(2026,1,16),
  new Date(2026,1,17), new Date(2026,1,20), new Date(2026,1,21),

  // Mar√ßo
  new Date(2026,2,13), new Date(2026,2,14)
];

/* Vale das Flores */
const bloqueadasVale = [
  new Date(2026,0,1), new Date(2026,0,2), new Date(2026,0,3),
  new Date(2026,0,4), new Date(2026,0,5), new Date(2026,0,6),
  new Date(2026,0,7), new Date(2026,0,8), new Date(2026,0,9),
  new Date(2026,0,10), new Date(2026,0,11), new Date(2026,0,12),
  new Date(2026,0,13), new Date(2026,0,14), new Date(2026,0,15),
  new Date(2026,0,16), new Date(2026,0,17),
  new Date(2026,0,19), new Date(2026,0,20), new Date(2026,0,21),
  new Date(2026,0,22), new Date(2026,0,23), new Date(2026,0,24),
  new Date(2026,0,29),

  new Date(2026,1,1), new Date(2026,1,2),
  new Date(2026,1,22), new Date(2026,1,23),

  new Date(2026,2,2)
];

function setupPicker(id, bloqueadas, ps, pf, totalEl, setVars){
  flatpickr(id,{
    locale: "pt",
    mode:"range",
    minDate:inicio,
    maxDate:fim,
    disable:bloqueadas,

    onOpen(_,__,fp){
      if(window.innerWidth<=768 && !fp.calendarContainer.querySelector('.fp-close-btn')){
        const b=document.createElement('div');
        b.className='fp-close-btn';
        b.innerText='‚úï Fechar';
        b.onclick=()=>fp.close();
        fp.calendarContainer.appendChild(b);
      }
    },

    onChange:d=>{
      if(d.length===2){
        const r=calculaTotal(d[0],d[1],ps,pf);
        if(isFds(d[0]) && r.dias<2){
          alert("M√≠nimo 2 di√°rias no fim de semana");
          return;
        }
        setVars(d[0],d[1],r.t);
        totalEl.innerText=`Total: R$ ${r.t}`;
      }
    }
  });
}

let checkin1,checkout1,total1=0;
let checkin2,checkout2,total2=0;

setupPicker("#datas1", bloqueadasDoce, 700, 900, document.getElementById("total1"),
 (ci,co,t)=>{checkin1=ci;checkout1=co;total1=t});

setupPicker("#datas2", bloqueadasVale, 800, 950, document.getElementById("total2"),
 (ci,co,t)=>{checkin2=ci;checkout2=co;total2=t});

function reservar(nome,total,ci,co){
 if(!ci||!co){alert("Selecione as datas");return;}
 const msg=`Ol√°! Quero reservar a ${nome}
Check-in: ${ci.toLocaleDateString()}
Check-out: ${co.toLocaleDateString()}
Total: R$ ${total}`;
 window.open(`https://wa.me/${whatsapp}?text=${encodeURIComponent(msg)}`,"_blank");
}
</script>
</body>
</html>
